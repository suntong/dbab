#!/bin/sh

##-----------------------------------------------------------------------
## Porgram: dbab-add-list
## Purpose: Add your own entries to dnsmasq blocking list
## Authors: Tong Sun (c) 2013-2020
## License: BSD license
##-----------------------------------------------------------------------

dbab_list=/etc/dbab/dbab.list+
dbabsvr_addrs=`grep -v ^\# /etc/dbab/dbab.addr`
dbab_conf=/etc/dnsmasq.d/dbab-map.trashsites.conf

# Add the trash-sites to DNSmasq blocking
echo '# generated by dbab-add-list -- DO NOT EDIT' > $dbab_conf
for dbabsvr_addr in ${dbabsvr_addrs}; do
  sed 's#^.*$#'"address=/&/$dbabsvr_addr#" $dbab_list >> $dbab_conf
done
echo File $dbab_conf updated.
